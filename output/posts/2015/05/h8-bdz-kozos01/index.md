---
title: "H8/3048F-ONE評価基板でKOZOSを動かしてみた（準備編）"
date: 2015-05-16
categories: 
  - "retrocomputing"
tags: 
  - "h8"
coverImage: "h8board01.jpg"
---

ソフィアシステムズさんのBDZ Series H8 Embedded Training Boardをヤフオクで手にいれました。

![](images/h8board01.jpg)

すでに販売終了のもので何か仕様書のようなものはないかと探してみましたが見つかりませんでした。でも、秋月電子で販売している[H8/3069Fネット対応マイコンLANボード(K-01271)](http://akizukidenshi.com/catalog/g/gK-01271/ "K-01271")を使ったことがありますのである程度動かせるかなと。秋月電子でも同じCPUを使った[AKI-H8/3048F-ONEマイコンボード(K-02119)](http://akizukidenshi.com/catalog/g/gK-02119/ "K-02119")がありますのでこのデータシートも役に立ちそうです。

**※この内容は個人的な興味で行ったもので保証はありませんし、内容についてソフィアシステムズ様などへの問い合わせ等も行わないようにお願いします。**

このボードの概要は以下の通りです。

- CPUに16ビット・ワンチップ・マイコン H8/3048F-ONEを採用
- μITRON(Ver4.0準拠)が動作可能なハードウェア仕様
- 外部I/Fとして、RS232C×1chと100Base-Tを装備
- 1MB外付けSRAMを搭載し、内蔵フラッシュROMを使用せずにデバック作業が可能
- プログラムダウンロード、オンチップデバックが可能なI/Fを装備

秋月電子のH8/3069Fボードではシリアルポートを使ってマイコンに書き込みを行いました。このH8ボードでも同様のことができるはずです。ボードのコネクタを目視で確認したところ次の２つがシリアルのようです。

- JCOM (RS232C)・・・D-SUB9Pで見るからにRS232C
- JPRG (3P)・・・・・PRGはプログラミングの略

このH8ボードでは、CPUが小さい基板にはんだ付けされていて、全ピンが引き出されています。この部分を利用して、H8/3048Fのデータシートをみながらテスターで辿ってどのように接続されているのかを確認していきます。

マイコンのフラッシュに書き込むためのシリアルポートはポート1を使用しますが、このH8基板ではJPRGにTXD1,RXD1、JCOMにTXD0,RXD0が接続されていました。これで、JPRGコネクタがH8/3048F-ONEプログラム書き込み用と判断しました。

また、基板上にはRS232CドライバであるMAX3232があり、JPRGとJCOMはRS232Cレベルと考えられますので、いつものFT232基板(5V/3.3V)を使うのではなく、秋月電子の[USB-シリアル変換ケーブル(M-00720)](http://akizukidenshi.com/catalog/g/gM-00720/ "M-00720")を使いました。

WindowsPCをUSB-シリアル変換ケーブルを使ってJPRGコネクタに接続し、定番の[FDT](http://japan.renesas.com/products/tools/flash_programming/fdt/ "FDT")をインストールしてデバイスが認識されるかを確認したところ問題なく認識できました。これでH8/3048F-ONEへの書き込み準備ができました。

![](images/h8board02.jpg)

次はマイコンに書き込むプログラムを作成します。以前H8を使ったときは[KOZOS](http://kozos.jp/kozos/)という小さいOSを書き込みましたので、この基板でもKOZOSを動かしてみたいと思います。

（続く）
