---
title: "SBC8080ルーズキットに8255を接続してみた"
date: 2018-07-16
categories: 
  - "retrocomputing"
tags: 
  - "8080"
  - "sbc8080"
coverImage: "sbc8080_8255_completed.jpg"
---

無事[SBC8080ルーズキットが動作した](https://kanpapa.com/2018/07/sbc8080-assembled.html "SBC8080ルーズキットを組み立ててみた")ところで、8255を接続したくなってしまいました。

昔PC-8001をつかっていたのですが、拡張バスからケーブルを引き出して8255を接続していろいろ制御していました。同じことがまたできるかなと。

というわけで早速設計開始です。といっても8080に8255は簡単に接続できます。ざっと書いた回路図は以下の通りです。いつもの切り貼り＋手書き回路図ですのできれいではありません。

![8255_schematic.jpg](images/8255_schematic.jpg)

すでに、IOポートの00H～3FHはSUBボードの8251で使われているので、ここと重ならないように40Hから割り当てることにしました。

8255はポートA,B,Cを持っています。それぞれが8bitですので、ポート出力は10Pのコネクタとし、8ビットポートの出力と+5VとGNDもコネクタに接続しました。

基板は秋月電子のB基板と同じサイズとのことなので、仮組みをしてみました。

![sbc8080_8255_pre.jpg](images/sbc8080_8255_pre.jpg)

サイズもぴったりでいい感じですね。これで実装イメージがわきました。

<!--more-->

基板の製作に入る前にこの３つのコネクタをバス接続するためのフラットケーブルを作ります。

材料は、秋月電子さんの40Pフラットケーブルと千石電商さんで買った40Pヘッダコネクタです。

![sbc8080_cable1.jpg](images/sbc8080_cable1.jpg)

ヘッダコネクタをケーブルの中間部分に圧着工具で圧着します。

![sbc8080_cable2.jpg](images/sbc8080_cable2.jpg)

出来上がりです。このケーブルで3枚の基板がバス接続できます。

![sbc8080_cable3.jpg](images/sbc8080_cable3.jpg)

次は基板のレイアウト決めです。バスコネクタの位置は先ほどの仮組みのときに決めましたので、あとはICの配置とポートコネクタを配置して配線を行いました。

完成したSBC8080用8255ボードです。右側は別の回路が組めるように空けておきました。

![sbc8080_8255_completed.jpg](images/sbc8080_8255_completed.jpg)

裏側の配線はこんな感じです。ラッピングワイヤを使ってはんだ付けで配線しています。

![sbc8080_8255_back.jpg](images/sbc8080_8255_back.jpg)

早速、SBC8080に接続して動作確認を行います。まずは異常な発熱がないかとSBC8080が正常に動作するかの確認です。

![sbc8080_8255_test2.jpg](images/sbc8080_8255_test2.jpg)

特に問題なさそうです。TINY BASICも起動できました。

次にSBC8080のTINY BASICに搭載されているモニタプログラムで8255のテストプログラムを書き込んで実行します。プログラムは以下の通りです。

![8255_asm.PNG](images/8255_asm.png)

正常に動作すれば、パルス信号が各ポートから出力されます。LEDをつけてもよかったのですが、手っ取り早くオシロスコープで確認します。

![sbc8080_8255_test3.jpg](images/sbc8080_8255_test3.jpg)

パルス出力が見えました。正常に動作しているようです。

最後に基板をスタックにして完成です。

![sbc8080_8255_stack.jpg](images/sbc8080_8255_stack.jpg)

これでSBC8080にGPIOができました。今後GPIOに何か接続して制御してみようと思います。
